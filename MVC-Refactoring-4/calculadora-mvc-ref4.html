<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title></title>
</head>
<body>

</body>

<script>

class CalculatorModel
{
	constructor()
	{

	}

	calculate(expression)
	{
		return eval(expression);
	}
}

class CalculatorModel2
{
	constructor()
	{

	}

	calculate(expression)
	{
		return 'jodete!';
	}
}

class CalculatorController
{
	constructor( calculatorView, calculatorModel )
	{
		this.view = calculatorView;
		this.model = calculatorModel;
	}

	onclickbutton1()
	{
		this.view.display.value += '1';
	}

	onclickbutton2()
	{
		this.view.display.value += '2';
	}

	onclickbuttonPlus()
	{
		this.view.display.value += '+';
	}

	onclickbuttonCalculate()
	{
		this.view.display.value = this.model.calculate(this.view.display.value);
	}
}

class CalculatorView extends HTMLElement
{
	constructor( model )
	{
		super();

		this.display = document.createElement('input');
		this.display.type = 'text';

		this.button1 = document.createElement('button');
		this.button1.innerText = '1';
		
		this.button2 = document.createElement('button');
		this.button2.innerText = '2';
		
		this.buttonPlus = document.createElement('button');
		this.buttonPlus.innerText = '+';
		
		this.buttonCalculate = document.createElement('button');
		this.buttonCalculate.innerText = '=';

		this.innerModel = model;
		this.innerController = new CalculatorController(this, this.innerModel);
	}

	

	connectedCallback()
	{
		this.appendChild(this.display);
		this.appendChild(this.button1);
		this.appendChild(this.button2);
		this.appendChild(this.buttonPlus);
		this.appendChild(this.buttonCalculate);

		this.button1.addEventListener('click', () => this.innerController.onclickbutton1() );
		this.button2.addEventListener('click', () => this.innerController.onclickbutton2() );
		this.buttonPlus.addEventListener('click', () => this.innerController.onclickbuttonPlus() );
		this.buttonCalculate.addEventListener('click', () => this.innerController.onclickbuttonCalculate() );
	}

}
	
customElements.define('x-calculator-view', CalculatorView);

function startApplicationGUI()
{
	let myModel = new CalculatorModel();
	let myModel2 = new CalculatorModel2();
	
	let myCalculator = new CalculatorView(myModel);
	let myCalculator2 = new CalculatorView(myModel2);

	document.body.appendChild(myCalculator);
	document.body.appendChild(myCalculator2);
}

window.addEventListener('load', startApplicationGUI );

</script>

</html>
